
<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Dynamic Gait Index (DGI)</title>
<style>
    body { font-family: sans-serif; margin: 2rem; font-size: 16px; max-width: 1000px; }
    .question-block { margin-bottom: 2rem; }
    .question { font-weight: bold; margin-bottom: 0.5rem; }
    .toggle { color: #007acc; cursor: pointer; margin-bottom: 0.5rem; display: inline-block; }
    .instruction { display: none; margin-bottom: 0.5rem; color: #444; background: #f4f4f4; padding: 8px; border-left: 3px solid #007acc; }
    select { width: 100%; padding: 10px; font-size: 16px; }
    button { margin-top: 20px; padding: 10px 15px; font-size: 16px; }
    #result { margin-top: 2rem; font-weight: bold; white-space: pre-line; }
  </style>
<script src="robotoBase64.js"></script></head>
<body>
<h1>Dynamic Gait Index (DGI)</h1>
<p>Die DGI bewertet die Fähigkeit einer Person, das Gleichgewicht beim Gehen unter äusseren Anforderungen anzupassen (Vestibuläre Störungen, MS, CVI) </p>
<p> Im Cenplex Behandlungsplan als <strong> Messung </strong> vorhanden. Hier durchführen/eintragen und Score übertragen</p>
<form id="dgiForm"><div class="question-block"><div class="question">1. Gehen auf ebener Gehstrecke (6.1 m)</div><span class="toggle" onclick="toggleInstruction(this)">📘 Instruktion anzeigen</span><div class="instruction">Gehen Sie in Ihrem normalen Tempo bis zur markierten Stelle.</div><select name="q0"><option value="">-- Bewertung auswählen --</option><option value="3">0) starke Einschränkung – Kann nicht 6.1 m ohne Hilfsperson gehen, starke Gangabweichungen oder Gleichgewichtsprobleme.</option><option value="2">1) mittlere Einschränkung – 6.1 m Gehen, langsames Gehtempo, Hinkmechanismen, Gleichgewichtsprobleme.</option><option value="1">2) leichte Einschränkung – 6.1 m Gehen mit Gehhilfsmittel, Tempo verlangsamt, leichte Deviation.</option><option value="0">3) normal – 6.1 m Gehen, ohne Gehhilfsmittel, normales Tempo, keine Gleichgewichtsstörungen, normales Gangbild, kein Hinken.</option></select></div><div class="question-block"><div class="question">2. Gehen mit Tempowechsel</div><span class="toggle" onclick="toggleInstruction(this)">📘 Instruktion anzeigen</span><div class="instruction">Beginnen Sie in Ihrem normalen Gehtempo (1.5 m), beschleunigen Sie, wenn ich sage, „gehen Sie so schnell wie möglich“ (1.5 m). Wenn ich Ihnen sage „langsam“, gehen Sie so langsam wie möglich (1.5 m).</div><select name="q1"><option value="">-- Bewertung auswählen --</option><option value="3">0) starke Einschränkung – Kein Tempo-Wechsel möglich oder Gleichgewichtsverlust beim Versuch.</option><option value="2">1) mittlere Einschränkung – Nur kleine Tempoveränderungen oder Gleichgewichtsprobleme beim Tempowechsel.</option><option value="1">2) leichte Einschränkung – Tempowechsel möglich, aber leichte Gangabweichung oder kein deutlicher Tempounterschied.</option><option value="0">3) normal – Fliessender Tempowechsel ohne Gleichgewichtsverlust oder Gangabweichung. Zeigt deutlichen Tempounterschied.</option></select></div><div class="question-block"><div class="question">3. Gehen mit Kopfdrehung nach rechts und links</div><span class="toggle" onclick="toggleInstruction(this)">📘 Instruktion anzeigen</span><div class="instruction">Gehen Sie in Ihrem normalen Tempo. Wenn ich sage „nach rechts“, gehen Sie weiter mit Kopf nach rechts, dann nach links usw.</div><select name="q2"><option value="">-- Bewertung auswählen --</option><option value="3">0) starke Einschränkung – Muss stehen bleiben oder verliert Gleichgewicht.</option><option value="2">1) mittlere Einschränkung – Mittlere Verlangsamung, zögerlich, aber weitergehend.</option><option value="1">2) leichte Einschränkung – Leichte Veränderung der Gehgeschwindigkeit oder Nutzung Gehhilfe.</option><option value="0">3) normal – Kopfdrehung flüssig ohne Veränderung des Ganges.</option></select></div><div class="question-block"><div class="question">4. Gehen und nach oben und unten schauen</div><span class="toggle" onclick="toggleInstruction(this)">📘 Instruktion anzeigen</span><div class="instruction">Gehen Sie in normalem Tempo. Bei „nach oben“: zur Decke blicken; bei „nach unten“: auf den Boden schauen, ohne stehen zu bleiben.</div><select name="q3"><option value="">-- Bewertung auswählen --</option><option value="3">0) starke Einschränkung – Muss stehen bleiben oder verliert Gleichgewicht deutlich.</option><option value="2">1) mittlere Einschränkung – Mässige Tempoveränderung oder Schwanken, aber weitergehend.</option><option value="1">2) leichte Einschränkung – Leichte Tempoveränderung oder Nutzung Gehhilfe.</option><option value="0">3) normal – Kopfbewegungen flüssig ohne Veränderungen im Gang.</option></select></div><div class="question-block"><div class="question">5. Gehen und Drehung um 180°</div><span class="toggle" onclick="toggleInstruction(this)">📘 Instruktion anzeigen</span><div class="instruction">Gehen Sie normal. Bei „Stopp und drehen“: drehen Sie sich zügig um 180° und stoppen Sie.</div><select name="q4"><option value="">-- Bewertung auswählen --</option><option value="3">0) starke Einschränkung – Drehen nicht selbständig oder unsicher.</option><option value="2">1) mittlere Einschränkung – Langsam, mit Hilfe oder kleinen Korrekturschritten.</option><option value="1">2) leichte Einschränkung – Sicher, aber langsamer (&gt;3 s).</option><option value="0">3) normal – Sicheres Drehen in &lt;3 Sekunden ohne Gleichgewichtsverlust.</option></select></div><div class="question-block"><div class="question">6. Gehen über Hindernisse</div><span class="toggle" onclick="toggleInstruction(this)">📘 Instruktion anzeigen</span><div class="instruction">Gehen Sie normal. Wenn Sie zur Schuhschachtel kommen, steigen Sie darüber und gehen weiter.</div><select name="q5"><option value="">-- Bewertung auswählen --</option><option value="3">0) starke Einschränkung – Kann Aufgabe nicht ohne Hilfe ausführen.</option><option value="2">1) mittlere Einschränkung – Muss anhalten oder braucht Hilfe.</option><option value="1">2) leichte Einschränkung – Bremst etwas, passt Schritte an.</option><option value="0">3) normal – Steigt ohne Tempoverlust oder Gleichgewichtsprobleme.</option></select></div><div class="question-block"><div class="question">7. Gehen um Hindernisse</div><span class="toggle" onclick="toggleInstruction(this)">📘 Instruktion anzeigen</span><div class="instruction">Gehen Sie geradeaus. Umgehen Sie die erste Keule rechts, die zweite links.</div><select name="q6"><option value="">-- Bewertung auswählen --</option><option value="3">0) starke Einschränkung – Wirft Hindernis um oder braucht taktile Hilfe.</option><option value="2">1) mittlere Einschränkung – Muss stark abbremsen oder braucht Hilfe.</option><option value="1">2) leichte Einschränkung – Bremst, passt Schritte an.</option><option value="0">3) normal – Umrundet beide Hindernisse flüssig und sicher.</option></select></div><div class="question-block"><div class="question">8. Treppe</div><span class="toggle" onclick="toggleInstruction(this)">📘 Instruktion anzeigen</span><div class="instruction">Steigen Sie die Treppe hoch wie zuhause (mit oder ohne Geländer), oben drehen und wieder runter.</div><select name="q7"><option value="">-- Bewertung auswählen --</option><option value="3">0) starke Einschränkung – Kann Aufgabe nicht sicher ausführen.</option><option value="2">1) mittlere Einschränkung – Nicht alternierend mit Geländer.</option><option value="1">2) leichte Einschränkung – Alternierend mit Geländer.</option><option value="0">3) normal – Alternierend, ohne Geländer.</option></select></div><button onclick="calculateScore()" type="button">✅ Score berechnen</button><button onclick="generatePDF()" type="button">📄 PDF exportieren</button></form>
<div id="result"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
function generatePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.addFileToVFS("Roboto-Regular.ttf", window.robotoBase64);
  doc.addFont("Roboto-Regular.ttf", "Roboto", "normal");
  doc.setFont("Roboto", "normal");
  doc.setFontSize(14);

  let y = 15;
  const left = 15;
  const right = 190;
  const lineHeight = 8;
  let total = 0;
  let questionNumber = 1;
  const subscores = { ant: 0, reak: 0, sens: 0, dyn: 0 };

  for (let i = 1; i <= 14; i++) {
    const sel = document.querySelector(`select[name='q${i}']`);
    if (!sel || sel.value === "") continue;
    const rawLabel = document.querySelector(`label[for='q${i}']`).innerText;
    const labelText = rawLabel.replace(/^[0-9]+\.\s*/, "").trim();
    const fullLine = `${questionNumber}. ${labelText}`;
    const wrappedLines = doc.splitTextToSize(fullLine, 160);
    const val = parseInt(sel.value);
    total += val;
    if (i <= 3) subscores.ant += val;
    else if (i <= 6) subscores.reak += val;
    else if (i <= 9) subscores.sens += val;
    else subscores.dyn += val;
    wrappedLines.forEach((line, idx) => {
      doc.text(line, left, y);
      if (idx === 0) {
        doc.text(`${val}`, right, y, { align: "right" });
      }
      y += lineHeight;
    });
    y += 2;
    questionNumber++;
    if (y > 270) {
      doc.addPage();
      y = 20;
    }
  }

  y += 5;
  doc.setFontSize(13);
  doc.setFont(undefined, "bold");
  doc.text("Subscores", left, y); y += lineHeight;
  doc.setFont(undefined, "normal");
  doc.setFontSize(12);
  doc.text(`Antizipatorisch: ${subscores.ant} / 6`, left, y); y += lineHeight;
  doc.text(`Reaktiv-postural: ${subscores.reak} / 6`, left, y); y += lineHeight;
  doc.text(`Sensorisch: ${subscores.sens} / 6`, left, y); y += lineHeight;
  doc.text(`Dynamischer Gang: ${subscores.dyn} / 10`, left, y); y += lineHeight;

  y += 5;
  doc.setFont(undefined, "bold");
  doc.setFontSize(14);
  doc.text("Gesamtergebnis", left, y); y += lineHeight;
  doc.setFont(undefined, "normal");
  doc.setFontSize(12);
  doc.text(`Mini-BESTest Gesamtscore: ${total} / 28`, left, y); y += lineHeight;
  const today = new Date().toLocaleDateString("de-CH");
  doc.text(`Datum: ${today}`, left, y);

  doc.save("MiniBEST_Auswertung.pdf");
}
</script>
<script>
function generatePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.addFileToVFS("Roboto-Regular.ttf", window.robotoBase64);
  doc.addFont("Roboto-Regular.ttf", "Roboto", "normal");
  doc.setFont("Roboto", "normal");
  doc.setFontSize(14);

  let y = 15;
  const left = 15;
  const right = 190;
  const lineHeight = 8;
  let total = 0;
  let questionNumber = 1;
  const subscores = { ant: 0, reak: 0, sens: 0, dyn: 0 };

  for (let i = 1; i <= 14; i++) {
    const sel = document.querySelector(`select[name='q${i}']`);
    if (!sel || sel.value === "") continue;
    const rawLabel = document.querySelector(`label[for='q${i}']`).innerText;
    const labelText = rawLabel.replace(/^[0-9]+\.\s*/, "").trim();
    const fullLine = `${questionNumber}. ${labelText}`;
    const wrappedLines = doc.splitTextToSize(fullLine, 160);
    const val = parseInt(sel.value);
    total += val;
    if (i <= 3) subscores.ant += val;
    else if (i <= 6) subscores.reak += val;
    else if (i <= 9) subscores.sens += val;
    else subscores.dyn += val;
    wrappedLines.forEach((line, idx) => {
      doc.text(line, left, y);
      if (idx === 0) {
        doc.text(`${val}`, right, y, { align: "right" });
      }
      y += lineHeight;
    });
    y += 2;
    questionNumber++;
    if (y > 270) {
      doc.addPage();
      y = 20;
    }
  }

  y += 5;
  doc.setFontSize(13);
  doc.setFont(undefined, "bold");
  doc.text("Subscores", left, y); y += lineHeight;
  doc.setFont(undefined, "normal");
  doc.setFontSize(12);
  doc.text(`Antizipatorisch: ${subscores.ant} / 6`, left, y); y += lineHeight;
  doc.text(`Reaktiv-postural: ${subscores.reak} / 6`, left, y); y += lineHeight;
  doc.text(`Sensorisch: ${subscores.sens} / 6`, left, y); y += lineHeight;
  doc.text(`Dynamischer Gang: ${subscores.dyn} / 10`, left, y); y += lineHeight;

  y += 5;
  doc.setFont(undefined, "bold");
  doc.setFontSize(14);
  doc.text("Gesamtergebnis", left, y); y += lineHeight;
  doc.setFont(undefined, "normal");
  doc.setFontSize(12);
  doc.text(`Mini-BESTest Gesamtscore: ${total} / 28`, left, y); y += lineHeight;
  const today = new Date().toLocaleDateString("de-CH");
  doc.text(`Datum: ${today}`, left, y);

  doc.save("MiniBEST_Auswertung.pdf");
}
</script>
<p><a href="index.html"> ⬅️ Zurück zur Hauptseite</a></p>
</body>
</html>
